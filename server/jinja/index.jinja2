{% extends "base.jinja" %}

{% block title %}
Accessor Host Server
{% endblock %}

{% block content %}

<h1>Accessors</h1>

<p>
  This server hosts accessors and makes them available in JSON and XML formats.
</p>

<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Group</th>
      <th>Provides</th>
      <th>Creates</th>
      <th>Last Updated</th>
    </tr>
  </thead>

  {% for record in accessors_db %}
  <tr>
    {% if record.errors %}
    <td><a href="/view{{ record.path }}" style="color: red;"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span> {{ record.name }}</a></td>
    {% else %}
    <td><a href="/view{{ record.path }}">{{ record.name }}</a></td>
    {% endif %}
    <td>{{ record.group }}</td>
    <td>
      {% for iface in record.accessor.implements %}
      <p>{{ iface.interface }}</p>
      {% endfor %}
    </td>
    <td>
      {% for port in record.accessor.created_ports %}
      <p>
      {% if 'observe' in port.directions %}
      <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
      {% endif %}
      {% if 'input' in port.directions %}
      <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
      {% endif %}
      {{ port.name }}
      {% if 'output' in port.directions %}
      <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
      {% endif %}
      </p>
      {% endfor %}
    </td>
    <td>{{ record.compilation_timestamp.humanize() }}</td>
  </tr>
  {% endfor %}

</table>

{% endblock %}
